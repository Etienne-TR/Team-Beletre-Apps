<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√âdition des activit√©s - Responsabilit√©s - Team Apps</title>
    <link rel="stylesheet" href="/shared/css/shared.css">
</head>
<body>
    <div id="loadingSection">
        <div class="loading">Chargement de l'√©diteur d'activit√©s...</div>
    </div>
    
    <div id="authError" style="display: none;">
        <div class="error-message">
            <h2>Acc√®s non autoris√©</h2>
            <p>Vous devez √™tre connect√© pour acc√©der √† cette page.</p>
            <a href="../../">Retour</a>
        </div>
    </div>
    
    <!-- Page principale de l'√©diteur -->
    <div id="editorPage" style="display: none;">
        <div id="appHeader">
            <!-- Les filtres seront d√©plac√©s ici par JavaScript -->
        </div>

        <main class="main-content">
            <!-- Section 1: S√©lection de l'activit√© -->
            <section class="selection-section card">
                <div id="activitiesGrid" class="activities-list"></div>
            </section>

            <!-- Section 2: √âdition de l'activit√© -->
            <section class="editing-section card" id="editingSection" style="display: none;">
                <div class="editing-header">
                    <h2 id="editingTitle">‚úèÔ∏è D√©tails de l'activit√©</h2>
                    <div class="editing-actions">
                        <button id="backToListBtn" class="btn">Retour √† la liste</button>
                    </div>
                </div>
                
                <!-- Nouvelle version en mode consultation -->
                <div id="activityDetails" class="activity-details-view">
                    <!-- Le contenu sera g√©n√©r√© dynamiquement par JavaScript -->
                </div>
                
                <!-- Modal pour l'√©dition des sections -->
                <div id="sectionEditModal" class="modal" style="display: none;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 id="modalTitle">Modifier la section</h3>
                            <button class="modal-close" id="closeModal">&times;</button>
                        </div>
                        <div class="modal-body" id="modalFormContainer">
                            <!-- Le contenu du formulaire sera ajout√© dynamiquement -->
                        </div>
                        <div class="modal-footer">
                            <button id="saveModalBtn" class="btn btn-success">Enregistrer</button>
                            <button id="cancelModalBtn" class="btn">Annuler</button>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal pour l'√©dition des t√¢ches -->
    <div id="taskModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="taskModalTitle">√âdition de la t√¢che</h3>
                <button class="modal-close" id="closeTaskModal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="taskForm">
                    <div class="form-group">
                        <label for="taskName">Nom de la t√¢che *</label>
                        <input type="text" id="taskName" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="taskDescription">Description</label>
                        <textarea id="taskDescription" name="description" rows="3"></textarea>
                    </div>
                    
                    <div class="form-section">
                        <h4>Assignations</h4>
                        <div class="assignments-container">
                            <div class="assignments-list" id="assignmentsList">
                                <!-- Liste des assignations actuelles -->
                            </div>
                            <div class="add-assignment">
                                <select id="newAssignmentSelect" class="worker-select">
                                    <option value="">S√©lectionner un travailleur...</option>
                                </select>
                                <div class="assignment-dates">
                                    <input type="date" id="newAssignmentStartDate" placeholder="D√©but">
                                    <input type="date" id="newAssignmentEndDate" placeholder="Fin">
                                </div>
                                <button type="button" id="addAssignmentBtn" class="btn btn-outline">‚ûï Assigner</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button id="saveTaskBtn" class="btn btn-success">üíæ Enregistrer la t√¢che</button>
                <button id="cancelTaskBtn" class="btn btn-outline">‚ùå Annuler</button>
            </div>
        </div>
    </div>

    <!-- Modal d'activit√© -->
    <div id="activityModal" class="modal" style="display:none;">
        <div class="modal-content">
            <span id="closeActivityModal" class="close">&times;</span>
            <h2 id="activityModalTitle"></h2>
            <div id="activityModalContent"></div>
        </div>
    </div>

    <script type="module" src="editor.js"></script>
</body>
</html> 